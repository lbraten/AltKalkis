
name: Oppdater data (vær + quote)

on:
  schedule:
    - cron: "10 0 * * *"   # hver dag kl. 00:10 UTC
  workflow_dispatch:        # slik at du kan kjøre manuelt fra Actions

jobs:
  fetch:
    runs-on: ubuntu-latest
    steps:
      - name: Sjekk ut repo
        uses: actions/checkout@v4

      - name: Hent MET.no Locationforecast (Oslo)
        run: |
          mkdir -p data
          curl -s \
            -H "User-Agent: AltKalkis/1.0 (https://<brukernavn>.github.io; kontakt: <din-epost>)" \
            "https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=59.91&lon=10.75" \
            -o data/weather.json

      - name: Hent ZenQuotes (quote of the day)
        run: |
          curl -s "https://zenquotes.io/api/today" -o data/quote.json

      - name: Commit og push endringer
        run: |
          if [[ -n "$(git status --porcelain)" ]]; then
            git config user.name "github-actions[bot]"
            git config user.email "github-actions[bot]@users.noreply.github.com"
            git add data/weather.json data/quote.json
            git commit -m "Oppdater data: vær + quote"
            git push
          else
            echo "Ingen endringer å committe."
          fi
